{"ast":null,"code":"var _jsxFileName = \"/Users/yevgeniy.utkin/Documents/GitHub/chat-rag/frontend/src/components/FileUpload.tsx\",\n  _s = $RefreshSig$();\n/**\n * Thesis Context: File upload component explicates the document ingestion phase, making corpus construction\n * observable for auditors and ensuring experimenters can trace RAG knowledge sources.\n */\nimport React, { useState } from 'react';\nimport { ingest, uploadFile } from '../api/ingest';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst FileUpload = ({\n  onIngestComplete\n}) => {\n  _s();\n  const [file, setFile] = useState(null);\n  const [status, setStatus] = useState('Awaiting selection');\n  const [error, setError] = useState(null);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const handleFileChange = event => {\n    var _event$target$files;\n    const selected = (_event$target$files = event.target.files) === null || _event$target$files === void 0 ? void 0 : _event$target$files[0];\n    setFile(selected !== null && selected !== void 0 ? selected : null);\n    setStatus(selected ? `Ready to upload ${selected.name}` : 'Awaiting selection');\n    setError(null);\n  };\n  const handleSubmit = async event => {\n    event.preventDefault();\n    if (!file) {\n      setError('Please select a document to index.');\n      return;\n    }\n    try {\n      setIsProcessing(true);\n      setStatus('Uploading to backend...');\n      const uploadResult = await uploadFile(file);\n      setStatus('Triggering vector store ingestion...');\n      const ingestResult = await ingest(uploadResult.file_id);\n      const newStatus = `Indexed ${ingestResult.chunks} chunks from ${file.name}`;\n      setStatus(newStatus);\n      setError(null);\n      onIngestComplete === null || onIngestComplete === void 0 ? void 0 : onIngestComplete({\n        fileName: file.name,\n        chunks: ingestResult.chunks\n      });\n    } catch (uploadError) {\n      setError('Ingestion failed. Please inspect backend logs for diagnostic replication.');\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"space-y-4 rounded-lg border border-gray-200 bg-white p-6 shadow-sm\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"block text-sm font-semibold text-gray-700\",\n        children: \"Select document\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        onChange: handleFileChange,\n        className: \"block w-full text-sm text-gray-700\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-xs text-gray-500\",\n        children: \"Supported formats align with backend preprocessing capabilities.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"submit\",\n      disabled: !file || isProcessing,\n      className: \"w-full rounded-md bg-blue-600 px-4 py-2 text-sm font-semibold text-white shadow disabled:cursor-not-allowed disabled:bg-blue-300\",\n      children: isProcessing ? 'Indexing…' : 'Upload & Ingest'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-sm text-gray-600\",\n      children: status\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-sm text-red-500\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n};\n_s(FileUpload, \"Vvh3zKexQAl3Xjy1wJxBZS7nyBg=\");\n_c = FileUpload;\nexport default FileUpload;\nvar _c;\n$RefreshReg$(_c, \"FileUpload\");","map":{"version":3,"names":["React","useState","ingest","uploadFile","jsxDEV","_jsxDEV","FileUpload","onIngestComplete","_s","file","setFile","status","setStatus","error","setError","isProcessing","setIsProcessing","handleFileChange","event","_event$target$files","selected","target","files","name","handleSubmit","preventDefault","uploadResult","ingestResult","file_id","newStatus","chunks","fileName","uploadError","onSubmit","className","children","_jsxFileName","lineNumber","columnNumber","type","onChange","disabled","_c","$RefreshReg$"],"sources":["/Users/yevgeniy.utkin/Documents/GitHub/chat-rag/frontend/src/components/FileUpload.tsx"],"sourcesContent":["/**\n * Thesis Context: File upload component explicates the document ingestion phase, making corpus construction\n * observable for auditors and ensuring experimenters can trace RAG knowledge sources.\n */\nimport React, { useState } from 'react';\nimport { ingest, uploadFile } from '../api/ingest';\n\ninterface FileUploadProps {\n  onIngestComplete?: (info: { fileName: string; chunks: number }) => void;\n}\n\nconst FileUpload: React.FC<FileUploadProps> = ({ onIngestComplete }) => {\n  const [file, setFile] = useState<File | null>(null);\n  const [status, setStatus] = useState<string>('Awaiting selection');\n  const [error, setError] = useState<string | null>(null);\n  const [isProcessing, setIsProcessing] = useState<boolean>(false);\n\n  const handleFileChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const selected = event.target.files?.[0];\n    setFile(selected ?? null);\n    setStatus(selected ? `Ready to upload ${selected.name}` : 'Awaiting selection');\n    setError(null);\n  };\n\n  const handleSubmit = async (event: React.FormEvent) => {\n    event.preventDefault();\n    if (!file) {\n      setError('Please select a document to index.');\n      return;\n    }\n    try {\n      setIsProcessing(true);\n      setStatus('Uploading to backend...');\n      const uploadResult = await uploadFile(file);\n      setStatus('Triggering vector store ingestion...');\n      const ingestResult = await ingest(uploadResult.file_id);\n      const newStatus = `Indexed ${ingestResult.chunks} chunks from ${file.name}`;\n      setStatus(newStatus);\n      setError(null);\n      onIngestComplete?.({ fileName: file.name, chunks: ingestResult.chunks });\n    } catch (uploadError) {\n      setError('Ingestion failed. Please inspect backend logs for diagnostic replication.');\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-4 rounded-lg border border-gray-200 bg-white p-6 shadow-sm\">\n      <div className=\"space-y-2\">\n        <label className=\"block text-sm font-semibold text-gray-700\">Select document</label>\n        <input\n          type=\"file\"\n          onChange={handleFileChange}\n          className=\"block w-full text-sm text-gray-700\"\n        />\n        <p className=\"text-xs text-gray-500\">Supported formats align with backend preprocessing capabilities.</p>\n      </div>\n      <button\n        type=\"submit\"\n        disabled={!file || isProcessing}\n        className=\"w-full rounded-md bg-blue-600 px-4 py-2 text-sm font-semibold text-white shadow disabled:cursor-not-allowed disabled:bg-blue-300\"\n      >\n        {isProcessing ? 'Indexing…' : 'Upload & Ingest'}\n      </button>\n      <p className=\"text-sm text-gray-600\">{status}</p>\n      {error && <p className=\"text-sm text-red-500\">{error}</p>}\n    </form>\n  );\n};\n\nexport default FileUpload;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}